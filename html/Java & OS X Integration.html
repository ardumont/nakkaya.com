<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head profile="http://gmpg.org/xfn/11">

    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="/style.css"
	  title="Nurullah Akkaya" media="screen,projection" />

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <meta name="keywords" content="" />
    <meta name="description" content="" />

    <title>Java & OS X Integration</title>

  </head><body>
    <!-- wrap START -->
    <div id="wrap">

      <!-- container START -->
      <div id="container">

	<!-- header START -->
	<div id="header">
	  <div id="caption">
	    <h1 id="title"><a href="http://nakkaya.com/">Nurullah
		Akkaya's Home</a></h1>
	    <div id="tagline">useless homepage for hosting pointless projects.</div>

	  </div>

	  <!-- navigation START -->
	  <div id="navigation">
	    <ul id="menus">
	      <li class="current_page_item"><a class="home" title="Home" href="http://nakkaya.com/">Home</a></li>
	      <li class="page_item page-item-2"><a href="Contact.html" title="About">About</a></li>
	      <li><a class="lastmenu" href="javascript:void(0);"></a></li>

	    </ul>

	    <!-- searchbox START -->

	    <div id="searchbox">
	      <form action="http://www.google.com/cse" id="cse-search-box">
		<div class="content">

		  <input type="hidden" name="cx" value="011327289396503571951:gmikuqrq7lm" />
		  <input type="hidden" name="ie" value="UTF-8" />
		  <input class="textfield" name="q" size="24" value="" type="text">
		  <span class="switcher">Switcher</span>
		</div>
		
		</form>
		<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=cse-search-box&lang=en"></script>
	    </div>
	    <!-- searchbox END -->

	    <div class="fixed"></div>
	  </div>
	  <!-- navigation END -->

	  <div class="fixed"></div>
	</div>

	<!-- header END -->

	<!-- content START -->
	<div id="content">

	  <!-- main START -->
	  <div id="main">

	    <div class="post" id="post-1">
	      <h2>Java & OS X Integration</h2>

	      <div class="content">
<p>Apple provides an Application class that allows you to integrate your
application with the OS X environment. It allows Java applications to
behave more like native OS X applications.</p>

<h3>Handling Quit</h3>

<p class="first">Following snippet will install an window listener and run your clean up
code before the application is exited. However when user selects Quit
instead of hitting the red dot clean up code will not run.</p>

<pre class="example">
addWindowListener(new WindowAdapter(){
	public void windowClosing(WindowEvent we){

                //do something here
	        System.exit(0);

	}});
</pre>


<p>In order to handle quit menu item. Apple's Application class class
provides handlers. But as a down side these classes are apple only
classes you should not load them when you are not OS X. So wrap them in
a class and load that class only when you are on OS X and use standard
window listener on other operating systems.</p>

<pre class="example">
import com.apple.eawt.*;
import com.apple.mrj.*;

public class MacApplication extends Application {

    public MacApplication( ) {

		public void handleQuit( ApplicationEvent event ) {
                    // do something here...
		    System.exit(0);
		}

	    });
    }
}
</pre>


<p>Now when Quit menu item is selected your application will run your clean
up code.</p>


<h3>Hiding your application</h3>

<p class="first">When you close a window on a mac, application is kept running and only the
window is hidden. In order for our application to play nice with native
applications we should also implement this. Fortunately Application class
provides a handler for that too.</p>

<pre class="example">
public void handleReOpenApplication(ApplicationEvent event) {
    //mainFrame.setVisible(true);
}
</pre>

<p>Now when the dock icon is clicked your application will be visible and
when the red dot is clicked, it will only be hidden. Don't forget to set
your main frame's default close operation to hide.</p>



<h3>Knowing your OS</h3>

<p class="first">If you are not on OS X, you shouldn't load MacApplication class. On
mac's mrj.version system property is always set you can check it's value
to see if you are on a mac. If it's set create your application object.</p>

<pre class="example">
	if(System.getProperty(&quot;mrj.version&quot;) == null){
	    addWindowListener(new WindowAdapter(){
		    public void windowClosing(WindowEvent we){
                        //not on a mac cleanup
			System.exit(0);
		    }});
	}else{
	    MacApplication macApplication = new MacApplication(  );
	}
</pre>

<p>Resources</p>

<ul>
<li><a href="http://developer.apple.com/documentation/Java/Reference/1.5.0/appledoc/api/com/apple/eawt/Application.html">Application (Apple Java Extensions)</a></li>
</ul>

<p>Back to <a href="index.html">Home</a></p>



		<p class="under">
		</p>
		<div class="fixed"></div>
	      </div>
	    </div>	    

	  </div>
	  <!-- main END -->

	  
	  <!-- sidebar START -->
	  <div id="sidebar">

	    <!-- sidebar north START -->
	    <div id="northsidebar" class="sidebar">


	      <!-- showcase -->
	      
	      <div class="widget">
		<h3>Projects</h3>
	      </div>

	      
	      <div class="widget">		
		<h5>Lisp</h5>
		<ul>
		  <li><a href="nmapMode.html">nmapMode</a></li>
		  <li><a href="dsniffMode.html">dsniffMode</a></li>
		  <li><a href="sudoEl.html">sudoEl</a></li>
		</ul>

		<br/>
		<h5>Java</h5>
		<ul>
		  <li><a href="Mocha.html">Mocha</a></li>
		  <li><a href="regexBuiler.html">regexBuilder</a></li>
		  <li><a href="StartUpItem API.html">StartUpItem API</a></li>
		</ul>

		<br/>
		<h5>C/C++</h5>
		<ul>
		  <li><a href="makeWay.html">makeWay</a></li>
		</ul>
	      </div>

	      <!-- Start of Flickr Badge -->
	      <br/>
	      <br/>
	      <center>
		<script type="text/javascript"
		src="http://www.flickr.com/badge_code_v2.gne?count=1&display=random&size=t&layout=v&source=user&user=77255876%40N00"></script>
		</center>
	      <!-- End of Flickr Badge -->

	      
	    </div>

	  </div>
	  <!-- sidebar END -->
	  <div class="fixed"></div>
	</div>
	<!-- content END -->

	<!-- footer START -->
	<div id="footer">
	  <a id="gotop" href="#" onclick="MGJS.goTop();return false;">Top</a>
	  
	  <div id="copyright">
	    Copyright &copy; 2009 Nurullah Akkaya
	  </div>

	  <div id="themeinfo">
	    Last updated on
	    Friday, September 18, 2009

	    - Powered By 
	    <a href="http://mwolson.org/projects/EmacsMuse.html">Muse</a> , 
	    Theme by <a href="http://wordpress.org/extend/themes/inove">mg12</a>.</div>

	</div>
	<!-- footer END -->

      </div>
      <!-- container END -->
    </div>
    <!-- wrap END -->

<script src="http://www.google-analytics.com/urchin.js" 
	type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-87333-8";
urchinTracker();
</script>
</body></html>
