<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head profile="http://gmpg.org/xfn/11">

    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="/style.css"
	  title="Nurullah Akkaya" media="screen,projection" />

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <meta name="keywords" content="" />
    <meta name="description" content="" />

    <title>searchDown.el</title>

  </head><body>
    <!-- wrap START -->
    <div id="wrap">

      <!-- container START -->
      <div id="container">

	<!-- header START -->
	<div id="header">
	  <div id="caption">
	    <h1 id="title"><a href="http://nakkaya.com/">Nurullah
		Akkaya's Home</a></h1>
	    <div id="tagline">useless homepage for hosting pointless projects.</div>

	  </div>

	  <!-- navigation START -->
	  <div id="navigation">
	    <ul id="menus">
	      <li class="current_page_item"><a class="home" title="Home" href="http://nakkaya.com/">Home</a></li>
	      <li class="page_item page-item-2"><a href="Contact.html" title="About">About</a></li>
	      <li><a class="lastmenu" href="javascript:void(0);"></a></li>

	    </ul>

	    <!-- searchbox START -->

	    <div id="searchbox">
	      <form action="http://www.google.com/cse" id="cse-search-box">
		<div class="content">

		  <input type="hidden" name="cx" value="011327289396503571951:gmikuqrq7lm" />
		  <input type="hidden" name="ie" value="UTF-8" />
		  <input class="textfield" name="q" size="24" value="" type="text">
		  <span class="switcher">Switcher</span>
		</div>
		
		</form>
		<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=cse-search-box&lang=en"></script>
	    </div>
	    <!-- searchbox END -->

	    <div class="fixed"></div>
	  </div>
	  <!-- navigation END -->

	  <div class="fixed"></div>
	</div>

	<!-- header END -->

	<!-- content START -->
	<div id="content">

	  <!-- main START -->
	  <div id="main">

	    <div class="post" id="post-1">
	      <h2>searchDown.el</h2>

	      <div class="content">
<pre class="example">

;; This program is free software; you can redistribute it and/or modify it under
;; the terms of the GNU General Public License as published by the Free Software
;; Foundation; either version 2 of the License, or any later version.
;;
;; This program is distributed in the hope that it will be useful, but WITHOUT
;; ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
;; FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
;; details.
;;
;; You should have received a copy of the GNU General Public License along with
;; this program; if not, write to the Free Software Foundation, Inc., 59 Temple
;; Place - Suite 330, Boston, MA 02111-1307, USA.

;; Author: Nurullah Akkaya (nurullah@nakkaya.com)
;; Location: http://nakkaya.com
;; Version: 1.0

;;
;; This module will traverse a directory tree and
;; search for a regex. Exclude directories and
;; exclude files variables determine which files
;; and directories will be skipped.
;;
;; Installation
;; Load this file from emacs 
;; (load &quot;searchDown.el&quot;)
;; and call na-search-down using M-x
;;

;;folders to be skipped from search
(setq na-exclude-directories (list &quot;.svn&quot; &quot;.&quot;))
;;file extensions to be skipped from search.
(setq na-exclude-files (list &quot;.class&quot; &quot;.ico&quot; &quot;.png&quot; &quot;.jar&quot; &quot;.exe&quot; &quot;TAGS&quot; &quot;.DS_Store&quot; ))

(defun na-search-down( directory )
(interactive &quot;DDirectory: &quot;)

(setq regex (read-string &quot;Regex: &quot;))
(setq foundFiles (list )  )
(na-traverse-directory directory  )

(switch-to-buffer &quot;*Result*&quot;)
(with-current-buffer &quot;*Result*&quot;
(erase-buffer))
(set (make-local-variable 'truncate-lines) t)

(dolist (file foundFiles )
  (na-search-file-for-regex file regex )))

(defun na-traverse-directory( directory  )
;(print directory)
(dolist (node (directory-files directory t ) )
  (if (file-directory-p node)      
      (progn 
	;;check against excluded directories
	(setq exclude-directory nil)
	(dolist (item na-exclude-directories)
	  (if (string= item (substring node (- 0 (string-width item)) ))
	      (setq exclude-directory t)))
	;;traverse directory
	(if (equal exclude-directory nil )
	    (na-traverse-directory node  ))	
	)
    ;;add found file
    (progn 
      ;;(print node)
      ;;check against excluded files
      (setq exclude-file nil)
      (dolist (item na-exclude-files)
	(if (string= item (substring node (- 0 (string-width item)) ))
	    (setq exclude-file t)))
      (if (equal exclude-file nil )
	  (setq foundFiles (cons node foundFiles)))))))

;; (defun na-test()
;; (interactive)
;; (setq foundFiles (list )  )
;; (na-traverse-directory &quot;~/Projects/&quot;)
;; (print foundFiles))


(defun na-search-file-for-regex( file regex )
(setq na-fileName (car (reverse (split-string file &quot;/&quot;))))
(setq na-fileName-printed nil)
(with-temp-buffer
	  (beginning-of-buffer)
	  (insert-file-contents file )
	  (beginning-of-buffer)
	  (while (re-search-forward regex nil t)
	    (setq end (match-end 0))

	    (goto-char end)
	    (setq line (thing-at-point 'line))
	    (setq lineNumber (what-line))

	    (with-current-buffer &quot;*Result*&quot;
	      (end-of-buffer)
	      
	      (if (equal na-fileName-printed nil)
		  (progn 
		    (insert (concat &quot;\n&quot; na-fileName &quot;\n&quot;) )
		    (setq na-fileName-printed t)))	      
	      (insert (concat &quot;\t&quot;  lineNumber &quot;\t&quot; line ))))))
</pre>

<p>Back to <a href="index.html">Home</a></p>

		<p class="under">
		</p>
		<div class="fixed"></div>
	      </div>
	    </div>	    

	  </div>
	  <!-- main END -->

	  
	  <!-- sidebar START -->
	  <div id="sidebar">

	    <!-- sidebar north START -->
	    <div id="northsidebar" class="sidebar">


	      <!-- showcase -->
	      
	      <div class="widget">
		<h3>Projects</h3>
	      </div>

	      
	      <div class="widget">		
		<h5>Lisp</h5>
		<ul>
		  <li><a href="nmapMode.html">nmapMode</a></li>
		  <li><a href="dsniffMode.html">dsniffMode</a></li>
		  <li><a href="sudoEl.html">sudoEl</a></li>
		</ul>

		<br/>
		<h5>Java</h5>
		<ul>
		  <li><a href="Mocha.html">Mocha</a></li>
		  <li><a href="regexBuiler.html">regexBuilder</a></li>
		  <li><a href="StartUpItem API.html">StartUpItem API</a></li>
		</ul>

		<br/>
		<h5>C/C++</h5>
		<ul>
		  <li><a href="makeWay.html">makeWay</a></li>
		</ul>
	      </div>

	      <!-- Start of Flickr Badge -->
	      <br/>
	      <br/>
	      <center>
		<script type="text/javascript"
		src="http://www.flickr.com/badge_code_v2.gne?count=1&display=random&size=t&layout=v&source=user&user=77255876%40N00"></script>
		</center>
	      <!-- End of Flickr Badge -->

	      
	    </div>

	  </div>
	  <!-- sidebar END -->
	  <div class="fixed"></div>
	</div>
	<!-- content END -->

	<!-- footer START -->
	<div id="footer">
	  <a id="gotop" href="#" onclick="MGJS.goTop();return false;">Top</a>
	  
	  <div id="copyright">
	    Copyright &copy; 2009 Nurullah Akkaya
	  </div>

	  <div id="themeinfo">
	    Last updated on
	    Friday, September 18, 2009

	    - Powered By 
	    <a href="http://mwolson.org/projects/EmacsMuse.html">Muse</a> , 
	    Theme by <a href="http://wordpress.org/extend/themes/inove">mg12</a>.</div>

	</div>
	<!-- footer END -->

      </div>
      <!-- container END -->
    </div>
    <!-- wrap END -->

<script src="http://www.google-analytics.com/urchin.js" 
	type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-87333-8";
urchinTracker();
</script>
</body></html>
